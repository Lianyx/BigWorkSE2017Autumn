## 2.3 用户特征
总经理：公司会有1～2个总经理。所有单据都需要经过总经理的审批。为了更好的掌握公司的运营情况，总经理需要能查看财务工作，包括查盾销售明细，经营历程，经营情况。在商品滞销，节假日，需要发展会员等情况，总经理需要制定促销策略。总经理工作烦忙，希望新系统不要浪费太多时间。总经理的计算机操作技能较好。

## 3.2 功能需求
### 3.18 查看销售明细表
#### 3.18.1 特性描述
当需要查看销售明细表时，一个经过验证的总经理或财务人员查看销售明细表。<br>
段先级=中
#### 3.19.2 刺激响应序列
刺激：总经理或者财务人员输入筛选条件<br>
响应：系统显示符合筛选条件的商品销售记录
#### 3.19.3 相关功能需求
| 编号 | 需求描述 |
| ---- | ------ |
| InquireSales.Search<br> InquireSales.Search.KeyWord<br> InquireSales.Search.Null<br> InquireSales.Search.Invalid<br> | 系统允许进行搜索（输出）。<br>在用户选择搜索方式（时间区间（输入），商品名（输入），客户（输入），业务员（输入），仓库（输入））输入搜索关键词并确认搜索时，系统执行搜索任务（逻辑文件）。<br>用户没有输入关键词就搜索，系统不予响应。<br>如果用户输入关键词不合法（如时间区间是负数），系统给出提示（输出）。<br> |
| InquireSales.Result<br> InquireSales.Result.None<br> InquireSales.Result.Detail<br> InquireSales.Result.Export<br> | 在发起搜索并有搜索结果时，系统以列表形式显示商品销售记录（输出），每一项商品销售记录包括时间（精确到天，商品名，型号，数量，单价，总额）。<br>如果没有符合条件的商品，系统提示没有匹配结果（输出）。<br> 当用户查看某项商品交易记录的详细信息时（查询），系统显示该商品的详细信息（输出）。<br>在存在搜索结果而用户选择并导出信息时（查询），系统导出搜索结果为excel文件（对外接口）。<br> |
| InquireSales.Return | 在用户选择返回搜索时（查询），系统返回搜索界面。 |
输入：5<br>
输出：5<br>
查询：3<br>
逻辑文件：1<br>
对外接口：1 <br>
(5 * 4 + 5 * 5 + 3 * 4 + 1 * 10 + 1 * 7 ) * (0.65 + 0.01 * 42) = 79.1
### 3.19 查看经营历程表
#### 3.19.1 特性描述
当需要查看经营历程表时，一个经过验证的总经理或财务人员查看经营历程表。财务人员可以生成红冲<br>
段先级=中
#### 3.19.2 刺激响应序列
刺激：总经理或者财务人员输入筛选条件<br>
响应：系统显示符合筛选条件的单据列表
#### 3.19.3 相关功能需求
| 编号 | 需求描述 |
| ---- | ------ |
| InquireReceipts.Search<br>InquireReceipts.Search.KeyWord<br> InquireReceipts.Search.Null<br> InquireReceipts.Search.Invalid<br> | 系统允许用户进行搜索（输出）。<br>在用户选择搜索方式（时间区间（输入），单据类型（输入），客户（输入），业务员（输入），仓库（输入））输入搜索关键词并确认搜索时，系统执行搜索任务（逻辑文件）。<br>如果用户没有输入关键词就搜索，系统不予响应。<br>如果用户输入关键词不合法（如时间区间是负数），系统给出提示（输出）。<br> |
| InquireReceipts.Result<br> InquireReceipts.Result.None<br> InquireReceipts.Result.Detail<br> InquireReceipts.Result.Export<br>  | 在发起搜索并有搜索结果时，系统以列表形式显示单据（输出）。<br>如果没有符合条件的单据，系统提示没有匹配结果（输出）。<br> 当用户点击查看某项单据的详细信息时（查询），系统显示该商品的详细信息（输出）。<br>在存在搜索结果而用户选择并导出信息时（查询），系统导出搜索结果为excel文件（对外接口）。<br>  |
| InquireReceipts.Hongchong<br> InquireReceipts.HongchongAndCopy<br> InquireReceipts.HongchongAndCopy.Confirm<br> InquireReceipts.HongchongAndCopy.Invalid<br> | 在用户（仅限财务人员）选择某项单据进行红冲时（查询），系统在用户确认后（输出，查询），生成一张红冲单（逻辑文件）。<br> 在用户（仅限财务人员）选择某项单据并进行红冲复制操作时（查询），系统生成一张以红冲单据为模版的草稿单以供编辑（输出）。<br>在用户（仅限财务人员）编辑（输入）后确认红冲复制单时，系统检查数据符合规范，请求获得再次确认后保存红冲复制单（输出，查询，逻辑文件）。 <br>在红冲复制单据在用户编辑后确认时，如果有数据不符合规范，系统提出警告（输出）。<br> |
| InquireReceipts.Return | 在用户选择返回搜索时(查询)，系统返回搜索界面。 |
输入：6<br>
输出：9<br>
查询：7<br>
逻辑文件：3<br>
对外接口：1
(6 * 4 + 9 * 5 + 7 * 4 + 3 * 10 + 1 * 7 ) * (0.65 + 0.01 * 42) = 143.38
### 3.20 查看经营情况表
#### 3.20.1 特性描述
当需要查看经营情况表时，一个经过验证的总经理或财务人员查看经营情况表。<br>
段先级=中
#### 3.20.2 刺激响应序列
刺激：总经理或者财务人员输入时间段<br>
响应：系统显示收入，支出和利润
#### 3.20.3 相关功能需求
| 编号 | 需求描述 |
| ---- | ------ |
| InquireBalance.Search<br> InquireBalance.Search.KeyWord<br> InquireBalance.Search.Null<br> InquireBalance.Search.Invalid<br> | 系统允许进行搜索（输出）。<br> 在用户输入搜索时间段（输入），系统执行搜索任务（逻辑文件）。<br>如果用户没有输入关键词就搜索，系统不予响应。<br>如果用户输入关键词不合法（如时间区间是负数），系统给出提示（输出）。<br> |
| InquireBalance.Result<br> InquireBalance.Result.Export<br>  | 系统显示（输出）：1、收入类：销售收入，商品类收入（商品报溢收入，成本调价收入，进货退货差价，代金劵和实际收款差额收入），收入类显示折让后总收入，并显示折让了多少。2、支出类：销售成本、商品类支出（商品报损 商品赠出）支出类显示总支出。3、利润：折让后总收入-总支出。<br>在存在搜索结果而用户选择并导出信息时（查询），系统导出搜索结果为excel文件（对外接口）。<br> |
| InquireReceipts.Return | 在用户选择返回搜索时（查询），系统返回搜索界面。 |
输入：1<br>
输出：3<br>
查询：2<br>
逻辑文件：1<br>
对外接口：1
(1 * 4 + 3 * 5 + 2 * 4 + 1 * 10 + 1 * 7 ) * (0.65 + 0.01 * 42) = 47.08
### 3.21 审批单据
#### 3.21.1 特性描述
当有单据需要审批的时候，一个经过验证的总经理进行审批处理。<br>
段先级=高
#### 3.21.2 刺激/响应序列
刺激：总经理点击查看某单据<br>
响应：系统显示该单据的详细信息<br>
刺激：总经理修改某单据信息<br>
响应：系统记录并显示修改内容<br>
刺激：总经理为单据添加评语<br>
响应：系统记录评语<br>
刺激：总经理单独批准某单据<br>
响应：系统更新该单据状态，执行该单据对应后绪操作，更新未处理单据列表<br>
刺激：总经理单独驳回某单据<br>
响应：系统更新该单据状态，通知单据发出人，更新未处理单据列表<br>
刺激：总经理选择单据<br>
响应：系统在已选单据中作标记<br>
刺激：总经理取消已选单据<br>
响应：系统去除该单据的选中标记<br>
刺激：总经理批量批准单据<br>
响应：系统更新这批单据状态，执行该单据对应后绪操作，更新未处理单据列表<br>
刺激：总经理批量驳回单据<br>
响应：系统更新这批单据状态，通知单据发出人，更新未处理单据列表<br>
#### 3.21.3 相关功能需求
| 编号 | 需求描述 |
| ---- | ------ |
| Examine.List<br>Examine.List.Detail<br> Examine.List.Reorder<br> Examine.List.Choose<br> Examine.List.CancelChoice<br> Examine.List.Approve<br> Examine.List.Reject | 系统显示未审批单据列表(逻辑文件，输出)。<br>在总经理点击查看某单据时（查询），系统显示该单据的详细信息（输出），并打上已读标记（输出）。之后参见Examine.Detail。<br>在总经理更换未处理单据列表的排序方式（接时间，种类等）的时候（查询），系统更新列表视图（输出）。 <br>在总经理选择单据时（查询），系统在已选单据中作标记，如果是第一个选择，激活批量批准驳回操作（输出）。<br> 在总经理取消已选单据时（查询），系统去除该单据的选中标记，如果去除了最后一个，禁止批量批准驳回操作（输出）。<br> 在总经理批量批准单据时（查询），参见Examine.Approve。<br> 在总经理批量驳回单据时（查询），参见Examine.Reject。<br> |
| Examine.Detail<br> Examine.Detail.Modify <br> Examine.Detail.Modify.Invalid<br> Examine.Detail.Comment Examine.Detail.Approve<br> Examine.Detail.Reject<br> | 系统显示该单据的详细信息。<br> 在总经理修改单据信息时（输入），系统记录并显示修改内容。<br> 如果修改的信息不符合数据规范（参见写各单据时的标准），系统给出提醒（输出）。<br>在总经理为单据添加批语（输入），系统记录批语。<br> 在总经理单独批准某单据时（查询），参见Examine.Approve。<br>在总经理单独驳回某单据时（查询），参见Examine.Reject。<br> |
| Examine.Approve<br> Examine.Approve.Warning<br> Examine.Reject<br> | 在总经理批准单据时，系统请求确认（输出）。如果总经理确定（查询），更新单据状态，更新未处理单据列表（输出）。执行单据对应后绪操作（逻辑文件）。<br> 如果总经理选择批准时仍有不符合规范的数据，系统给出警告（输出）。<br> 在总经理驳回单据时，系统请求确认（输出）。如果确认（查询），更新单据状态，更新未处理单据列表（输出），提醒单据发出人（逻辑文件）。<br> |
输入：2<br>
输出：12<br>
查询：10<br>
逻辑文件：3<br>
对外接口：0
(2 * 4 + 12 * 5 + 10 * 4 + 3 * 10 + 1 * 7 ) * (0.65 + 0.01 * 42) = 155.15
### 3.22 制定促销策略
#### 3.22.1 特性描述
当需要制定促销策略的时候，一个经过验证的总经理制定促销策略。<br>
优先级=中
#### 3.22.2 响应序列
刺激：总经理增加/修改促销策略<br>
响应：系统显示促销策略详细信息<br>
刺激：总经理选择促销策略方式<br>
响应：系统记录并显示<br>
刺激：总经理输入促销策略详细信息<br>
响应：系统记录并显示<br>
刺激：总经理保存促销策略<br>
响应：系统更新促销策略列表，更新数据<br>
刺激：总经理删除促销策略<br>
响应：系统更新促销策略列表，更新数据<br>
#### 3.22.3 相关功能需求
| 编号 | 需求描述 |
| ---- | ------ |
| Promotion.List<br> Promotion.List.Detail<br> Promotion.List.Add<br> | 系统显示当前用户列表（逻辑文件，输出）。<br> 在总经理点击查看某促销策略（查询）时，系统显示该促销策略的详细信息（输出），参见Promotion.Detail。<br> 在总经理点击新增促销策略（查询）时，系统要求选择促销方式（输出。查询），即针对不同级别的用户制定促销策略，制定特价包，制定针对不同总价的促销策略三种。之后参见Promotion.Modify。<br> |
| Promotion.Detail<br> Promotion.Detail.Modify <br> | 系统显示该促销策略的详细信息。<br> 在总经理点击修改某促销策略时（查询），参见Promotion.Modify。<br>  |
| Promotion.Modify<br> Promotion.Modify.Band<br> Promotion.Modify.Combination<br> Promotion.Modify.Total<br> Promotion.Modify.Discount<br> Promotion.Modify.Token<br> Promotion.Modify.Gift<br> Promotion.Modify.Time<br>   Promotion.Modify.Confirm<br> Promotion.Modify.Valid <br> Promotion.Modify.Invalid<br> Promotion.Modify.Delete<br>  | 在总经理修改或新赠促销策略时，如果是针对不同用户级别，参见Promotion.Modify.Band, Promotion.Modify.Gift, Promotion.Modify.Discount, Promotion.Modify.Token；如果是针对组合商品，参见Promotion.Modify.Combination, Promotion.Modify.Discount；如果是针对总价，参见Promotion.Modify.Total, Promotion.Modify.Token, Promotion.Modify.Gift。<br> 在总经理选择促销策略针对的用户级别时（查询），系统记录并显示。<br> 在总经理输入组合商品（输入），包括组合中各商品的编号和数量，系统显示该商品信息。<br> 在总经理输入促销策略针对的总价时（输入），系统记录并显示。 <br> 在总经理输入折让数额（输入），系统记录并显示。<br> 在总经理输入代金劵数额（输入），系统记录并显示。<br>在总经理输入赠品时（输入），系统显示赠品信息。 <br> 在总经理输入该促销策略作用时间时（输入），系统记录并显示。<br> 在总经理确认更改某项促销策略时（查询），系统请求确认（输出）。<br>在总经理确定（查询）且输入数据符合要求时，更新促销策略数据（逻辑文件），更新促销策略列表（输出）。<br>在总经理确认理改某项促销策略时，如果输入数据不符合要求（包括选择的商品库存低于警戒数，时间间隔是负数，折让数额大于商品数额，有空缺信息），系统提出警告（输出）。 <br> 在总经理删除某项促销策略时（查询），系统请求确认（输出）。如果总经理确定（查询），更新促销策略数据（逻辑文件），更新促销策略列表（输出）。<br> |
输入：6<br>
输出：8<br>
查询：9<br>
逻辑文件：3<br>
对外接口：0
(6 * 4 + 8 * 5 + 9 * 4 + 3 * 10 + 0 * 7 ) * (0.65 + 0.01 * 42) = 139.1