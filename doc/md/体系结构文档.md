# 某灯具企业进销存管理系统体系结构文档
## V1.0 beta版
### 南京大学GZYZ小分队
#### 2017-10-22

---
## 更新版本记录
| **修改人** |**修改日期** |**修改原因**|**版本号** |
| :------   |:----: | ----    | :----: |

---

# 1.引言
## 1.1编制目的
本报告详细完成了对某灯具进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。  
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航

## 1.2词汇表
|**词汇表**|**词汇含义**|**备注**|
|----|----|---|
|ERP|进销存管理系统||
|User|用户||
|Promotion|销售策略||
|Log|操作记录||
|Message|消息||
|Check|单据审核||
|Sales|销售||
|Member|客户||
|Stock|库存||
|Bill|款单||
|Business|业务查询||
|Establish|期初建账||
|Account|账户||
|Inventory|库存||
|Goods|商品||
|GoodsClassification|商品分类||
||||


# 2.产品概述
参考某灯具企业进销存管理系统用例文档以及规格需求文档中对产品的概括描述。

# 3.逻辑视角
某灯具企业进销存管理系统中，选择了分层体系结构风格，将系统分为3层（展示层，业务逻辑层，数据层）能够很好地示意整个高层抽象。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑是叫和逻辑设计方案如下两图。  
下图为逻辑视角
![逻辑视角](体系结构图/逻辑视角.png)    
下图为设计方案  
![设计方案](体系结构图/设计方案.png)    
# 4.组合视角
## 4.1开发包图  
某灯具企业进销存管理系统最终开发包设计如下表  

下图为客户端开发包图
![客户端](体系结构图/客户端.png)  
  
下图为服务器端开发包图
![服务器端](体系结构图/服务器端.png)  

# 5.接口视角
## 5.1模块的职责
## 5.2用户界面层的分解
## 5.3业务逻辑层的分解
### 5.3.2业务逻辑层的接口规范
### userbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
    <td rowspan="4" >User.Login</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public boolean login(long id,String password);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>password符合输入规则</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>查找是否存在相应的User，根据输入的password返回登陆验证的结果</td>
  </tr>
    <tr align="center">
      <td rowspan="4" >User.Register</td>
    </tr>
    <tr>
      <td>语法</td>
      <td>public boolean register(long id,String password1,String password2);</td>
    </tr>
    <tr>
      <td>前置条件</td>
      <td>password符合输入规则且两个password一致</td>
    </tr>
    <tr>
      <td>后置条件</td>
      <td>根据输入的检查是否有此User，无则新建User并返回创建结果</td>
    </tr>
      <tr align="center">
          <td rowspan="4" >User.Find</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean find(long id);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>无</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入的检查是否有此User，有则进入安全问题找回密码</td>
        </tr>
    <tr align="center">
          <td rowspan="4" >User.SafeAnswer</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean checkAnswer(String answer1,String answer2,String answer3);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>无</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入的检查是否正确，正确则进入修改密码页面</td>
        </tr>
        <tr align="center">
          <td rowspan="4" >User.SetPassword</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean setPassword(String password1,String password2);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>password符合输入格式且一致</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入修改相应用户的密码</td>
        </tr>
    <tr align="center">
          <td rowspan="4" >UserManager.Init</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void init();</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统初始化管理员初始界面</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Init.List</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void initList();</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统初始化用户数据列表</td>
        </tr>
        <tr align="center">
          <td rowspan="4" >UserManager.User</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void showUserDetail(UserPO user);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统显示用户详细信息</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Search</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public List search（String keyword）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>返回用户列表</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Add</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean add（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>若系统无此用户，则添加此用户，返回添加结果</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Delete</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean delete（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除相应用户，返回是否成功删除</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Modify</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean modify（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>修改相应用户，返回是否成功修改</td>
        </tr>
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
      <td>DataBaseFactory.getUserDatabase</td>
      <td>得到User数据库引用</td>
    </tr>
     <tr>
      <td>UserDataService.insert(UserPO po)</td>
      <td>新增User</td>
    </tr>
    <tr>
      <td>UserDataService.search(UserPO po)</td>
      <td>查询User</td>
    </tr>
     <tr>
      <td>UserDataService.delete(UserPO po)</td>
      <td>删除User</td>
    </tr>
     <tr>
      <td>UserDataService.search(String keyword)</td>
      <td>查询User</td>
    </tr>
     <tr>
      <td>UserDataService.modify(UserPO po)</td>
      <td>修改User</td>
    </tr>
     <tr>
      <td>UserDataService.login</td>
      <td>提供登陆服务</td>
    </tr>
    <tr>
      <td>UserDataService.register</td>
      <td>提供注册服务</td>
    </tr>
    <tr>
      <td>UserDataService.login</td>
      <td>提供登陆服务</td>
    </tr>
    <tr>
      <td>UserDataService.find</td>
      <td>提供找回密码服务</td>
    </tr>
</table>
### promotionbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
 <tr align="center">
    <td rowspan="4" >Promotion.List</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void init();</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>初始化销售策略列表</td>
  </tr>
         <tr align="center">
    <td rowspan="4" >Promotion.Detail</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void showDetail(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>显示策略详细信息</td>
  </tr>
   <tr align="center">
    <td rowspan="4" >Promotion.List.Add</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void add(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>系统增加销售策略</td>
  </tr>
  <tr align="center">
    <td rowspan="4" >Promotion.Modify</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void modify(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>系统修改销售策略</td>
    <tr align="center">
    <td rowspan="4" >Promotion.Modify.Delete</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void delete(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>删除销售策略</td>
  </tr>
  </tr>
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
      <td>DataBaseFactory.getPromotionDatabase</td>
      <td>得到Promotion数据库引用</td>
    </tr>
     <tr>
      <td>PromotionDataService.insert(PromotionPO po)</td>
      <td>新增Promotion</td>
    </tr>
     <tr>
      <td>PromotionDataService.delete(PromotionPO po)</td>
      <td>删除Promotion</td>
    </tr>
     <tr>
      <td>PromotionDataService.modify(PromotionPO po)</td>
      <td>修改Promotion</td>
    </tr>
    
</table>



### utilitybl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
    <td rowspan="4" >Utility.getCurrentUser</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public UserPO getUser();</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>无</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>返回当前User实例</td>
  </tr>
   <tr align="center">
    <td rowspan="4" >Utility.setCurrentUser</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void setUser(UserPO user);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>无</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>设置当前User实例</td>
  </tr>
  </table>

 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
      <td>User.Login</td>
      <td>登陆成功后设置User实例</td>
    </tr>
</table>

### logbl

<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
     <td rowspan="4" >Log.record</td>
   </tr>
   <tr>
     <td>语法</td>
     <td>public void record(LogPO log);</td>
   </tr>
   <tr>
     <td>前置条件</td>
     <td>无</td>
   </tr>
   <tr>
     <td>后置条件</td>
     <td>记录操作</td>
   </tr>
     <tr align="center">
        <td rowspan="4" >Log.search</td>
      </tr>
      <tr>
        <td>语法</td>
        <td>public List search(String keyword);</td>
      </tr>
      <tr>
        <td>前置条件</td>
        <td>无</td>
      </tr>
      <tr>
        <td>后置条件</td>
        <td>查询操作</td>
      </tr>
        
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
          <td>DataBaseFactory.getLogDatabase</td>
          <td>得到Log数据库引用</td>
        </tr>
         <tr>
          <td>LogDataService.insert(LogPO po)</td>
          <td>新增Log</td>
        </tr>
         <tr>
          <td>LogDataService.search(String keyword)</td>
          <td>查询log</td>
        </tr>
</table>


###checkbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
         <td rowspan="4" >Check.List</td>
       </tr>
       <tr>
         <td>语法</td>
         <td>public void init();</td>
       </tr>
       <tr>
         <td>前置条件</td>
         <td>总经理必须已经被识别和授权</td>
       </tr>
       <tr>
         <td>后置条件</td>
         <td>初始化待审批单据列表</td>
       </tr>
       <tr align="center">
                <td rowspan="4" >Check.List.Detail</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void showDetail(ReceiptPO receipt);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>总经理必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>加载待审批单据详细信息</td>
              </tr>
   <tr align="center">
                  <td rowspan="4" >Check.List.Approve</td>
                 </tr>
                   <tr>
                        <td>语法</td>
                      <td>public void approve(ReceiptPO receipt);</td>
                  </tr>
                   <tr>
                      <td>前置条件</td>
                       <td>总经理必须已经被识别和授权</td>
                   </tr>
                    <tr>
                      <td>后置条件</td>
                      <td>系统单据状态改为已审核</td>
                   </tr>
            <tr align="center">
                                 <td rowspan="4" >Check.List.Reject</td>
                               </tr>
                                 <tr>
                                <td>语法</td>
                                   <td>public void reject(ReceiptPO receipt);</td>
                                </tr>
                                 <tr>
                                    <td>前置条件</td>
                                   <td>总经理必须已经被识别和授权</td>
                                  </tr>
                                 <tr>
                                    <td>后置条件</td>
                                    <td>系统向通知界面发出消息</td>
                                  </tr>    
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
              <td>DataBaseFactory.getCheckDatabase</td>
              <td>得到Check数据库引用</td>
            </tr>
             <tr>
              <td>CheckDataService.approve(receiptPO po)</td>
              <td>批准单据</td>
            </tr>
             <tr>
              <td>CheckDataService.reject(receiptPO po)</td>
              <td>驳回单据</td>
            </tr>
           <tr>
            <td>CheckDataService.show</td>
              <td>返回单据列表</td>
          </tr>           
</table>

### messagebl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
       <tr align="center">
                <td rowspan="4" >Message.send</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void send(MessagePO message,UserType usertype);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>向数据库和在线的用户发送信息</td>
       </tr>
       <tr align="center">
                <td rowspan="4" >Message.load</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void loadMessage();</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>加载数据库的message信息</td>
       </tr>
   <tr align="center">
                   <td rowspan="4" >Message.system</td>
                 </tr>
                 <tr>
                   <td>语法</td>
                   <td>public void sendSystemMessage(MessagePO message);</td>
                 </tr>
                 <tr>
                   <td>前置条件</td>
                   <td>用户必须已经被识别和授权</td>
                 </tr>
                 <tr>
                   <td>后置条件</td>
                   <td>向用户发送系统信息</td>
          </tr>
 
        
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
                  <td>DataBaseFactory.getMessageDatabase</td>
                  <td>得到Check数据库引用</td>
                </tr>
    <tr>
                  <td>MessageDataService.saveMessage(MessagePO message)</td>
                  <td>保存Message</td>
                </tr>         
    <tr>
                      <td>MessageDataService.loadMessage</td>
                      <td>保存Message</td>
     </tr>            
 <tr>
                       <td>MessageDataService.sendMessage</td>
                       <td>向在线用户发送Message</td>
      </tr>    
</table>

accountbl模块的接口规范

|**供接口名**|**语法**|**前置条件**|**后置条件**|
|----|----|----|----|
|Account.ShowAll|public ArrayList(AccountVO> showAllAcounts()|无|返回所有账户信息|
|Account.find|public ArrayList（AccountVO> find(String keywords, FindType type)|关键字符合输入条件|返回符合条件的账户信息|
|Account.add|public ResultMessage add(AccountVO vo)|无|增加新的账户，持久化更新涉及的对象的数据|
|Account.delete|public ResultMessage delete(AccountVO vo)|无|删除账户信息，持久化更新涉及的对象的数据|
|Account.modify|public ResultMessage modify(AccountVO vo)|无|修改账户信息，持久化更新涉及的对象的数据|


|**虚接口名**|**服务**|
|---|---|
|AccountDataService.finds(String keywords，FindType type)|根据关键字及其类型查找多个持久化对象|
|AccountDataService.insert(AccountPO po)|插入单一持久化对象|
|AccountDataService.delete(AccountPO po)|删除单一持久化对象|
|AccountDataService.update(AccountPO po)|更新单一持久化对象|
|DatabaseFactory.getAccountsDatabase|得到Accounts数据库的服务的引用|

businessbl模块的接口规范

|**供接口名**|**语法**|**前置条件**|**后置条件**|
|----|----|----|----|
|Business.saleAccount.find|public ArrayList(SaleAccountVO> find(Date start， Date end，GoodVO good,MemberVO member，UserVO user，CommodityVO commodity)|关键字符合输入条件|返回符合条件的销售明细表|
|Business.buisnessProgress.find|public ArrayList(BuisnessProgressVO> find(Date start， Date end，ReciptType type,MemberVO member，UserVO user，CommodityVO commodity)|关键字符合输入条件|返回符合条件的经营历程表|
|Business.buisnessProgres.delete|public ResultMessage delete(BuisnessProgressPO po)|同样的经营历程表已经存在|返回红冲结果|
|Business.buisnessProgres.modify|public ResultMessage modify(BuisnessProgressPO po)|同样的经营历程表已经存在|返回红冲并复制结果|
|Business.businessCondition.find|public ArrayList(BusinessConditionVO> find(Date start， Date end)|关键字符合输入条件|返回符合条件的经营情况表|
|Business.derive|public ArrayList(EXCELVO> deriveEXCEL()|无|导出excel|

|**需接口名**|**服务**|
|----|----|
|BusinessDataService.insert(BusinessPO po)|插入单一持久化对象|
|BusinessDataService.delete(BusinessPO po)|删除单一持久化对象|
|BusinessDataService.update(BusinessPO po)|插入单一持久化对象|
|DatabaseFactory.getBusinessDatabase|得到Business数据库的服务的引用|

billbl模块的接口规范

|**供接口名**|**语法**|**前置条件**|**后置条件**|
|----|----|----|----|
|Bill.payOrder.init|public payOrderVO init()|无|初始化一个付款单|
|Bill.collectionOrder.init|public collectionOrderVO init()|无|初始化一个收款单|
|Bill.payOrder.addTransferItem|public void addTransferItem(TransferItemVO vo)|已建立一个收款单|收款单添加一个转账列表|
|Bill.collectionOrder.addTransferItem|public void addTransferItem(TransferItemVO vo)|已建立一个付款单|付款单添加一个转账列表|
|Bill.payOrder.addAccounts|public void addAccounts(AccountsVO vo)|已建立一个转账列表|收款单添加一个银行账户|
|Bill.collectionOrder.addAccounts|public void addAccounts(AccountsVO vo)|已建立一个转账列表|付款单添加一个银行账户|
|Bill.payOrder.addTranferMoney|public void addTransferMoney(double transferMoney)|符合输入条件|收款单添加转账金额|
|Bill.collectionOrder.addTransferMoney|public void addTransferMoney(double transferMoney)|符合输入条件|付款单添加转账金额|
|Bill.payOrder.addRemarks|public void addAccounts(String remark)|已建立一个付款单|收款单添加备注|
|Bill.collectionOrder.addRemarks|public void addRemarks(String remark)|已建立一个收款单|付款单添加备注|
|Bill.payOrder.addSum|public void addSum(double sum)|符合输入条件|收款单添加金额总额|
|Bill.collectionOrder.addSum|public void addSum(double sum)|符合输入条件|付款单添加金额总额|
|Bill.cashOrder.init|public cashOrderVO init()|无|初始化一个现金费用单|
|Bill.cashOrder.addItem|public void addItem(ItemVO vo)|已建立一个现金费用单|现金费用单添加一个条目|
|Bill.cashOrder.addItemSum|public void addItemSum(double ItemSum)|符合输入条件|付款单添加条目金额|
|Bill.cashOrder.addRemarks|public void addRemarks(String remark)|已建立一个条目|现金费用单添加备注|
|Bill.cashOrder.addSum|public void addSum(double sum)|符合输入条件|现金费用单添加金额总额|
|Bill.submit|public ResultMessage submit(BillVO vo)|已建立相应单据|单据提交给总经理审批|
|Bill.deriveExcel|public ArrayList(ExcelVO> deriveExcel()|已建立相应单据|导出单据Excel|

|**需接口名**|**服务**|
|----|----|
|BillDataService.insert(BillPO po)|插入单一持久化对象|
|BillDataService.delete(BillPO po)|删除单一持久化对象|
|BillDataService.update(BillPO po)|插入单一持久化对象|
|DatabaseFactory.getBillDatabase|得到Bill数据库的服务的引用|

establishbl模块的接口规范

|**供接口名**|**语法**|**前置条件**|**后置条件**|
|----|----|----|----|
|Establishbl.init|public EstablishVO init(GoodSortVO goodSort,ArrayList(GoodVO> good,ArrayList(MemberVO> member, ArrayList(AccountVO> account|输入符合条件|生成期初信息|
|Establishbl.findIntial|public IntialAccount findIntial()|已生成期初信息|查看期初信息|

|**需接口名**|**服务**|
|----|----|
|EstablishService.insert(EstablishPO po)|插入单一持久化对象|
|EstablishService.intial|初始化单一持久化对象|
                      goodsclassifybl模块的接口规范
                        
                            
<table>
    <tr>
        <td colspan="3">提供的服务（供接口）</td>
    </tr>
    <tr>
        <td rowspan="3">GoodsClassify.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;GoodsClassifyVO&gt; show();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经创建一个Goods领域对象</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示所有分类</td>
    </tr>
    <tr>
        <td rowspan="3">GoodsClassify.getID</td>
        <td>语法</td>
        <td>public String getID(String upID);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加分类</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回新建ID</td>
    </tr>
    <tr>
        <td rowspan="3">GoodsClassify.addGoodsClassify</td>
        <td>语法</td>
        <td>public String addGoodsClassify(String name,String upID);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>分类名称输入合法，并且父类中没有添加商品</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加新的商品分类</td>
    </tr>
    <tr>
        <td rowspan="3">GoodsClassify.deleteGoodsClassify</td>
        <td>语法</td>
        <td>public String deleteGoodsClassify(String ID);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择分类</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除商品，更新信息</td>
    </tr>
    <tr>
        <td rowspan="3">GoodsClassify.updateGoodsClassify</td>
        <td>语法</td>
        <td>public String updateGoodsClassify(String ID,String name);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择分类</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>修改商品，更新信息</td>
    </tr>
</table>
<table>
    <tr>
        <td colspan="3">需要的服务（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>GoodsClassifyDataService.getID</td>
        <td>得到新建分类的ID</td>
    </tr>
    <tr>
        <td>GoodsClassifyDataService.insert(GoodsClassifyPO po)</td>
        <td>添加单一化持久对象</td>
    </tr>
    <tr>
        <td>GoodsClassifyDataService.delete(GoodsClassifyPO po)</td>
        <td>删除单一化持久对象</td>
    </tr>
    <tr>
        <td>GoodsClassifyDataService.update(GoodsClassifyPO po)</td>
        <td>更新单一化持久对象</td>
    </tr>
</table>
                        goodsclassifybl模块的接口规范

<table>
    <tr>
        <td colspan="3">提供的服务（供接口）</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;GoodsVO&gt; show();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经创建一个Goods领域对象</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示所有商品</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.addGoods</td>
        <td>语法</td>
        <td>public String addGoods(GoodsVO goodsVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品信息输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加商品到商品分类中</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.deleteGoods</td>
        <td>语法</td>
        <td>public String deleteGoods(String ID);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品编号输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除相应分类中的商品</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.updateGoods</td>
        <td>语法</td>
        <td>public String updateGoods(GoodsVO goodsVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品信息输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改相应商品信息</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.updateGoods</td>
        <td>语法</td>
        <td>public ArrayList&lt;GoodsVO&gt; findGoods(String info);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品信息输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>查找到商品</td>
    </tr>
</table>
<table>
    <tr>
        <td colspan="3">需要的服务（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>GoodsDataService.getID</td>
        <td>得到新建商品的ID</td>
    </tr>
    <tr>
        <td>GoodsDataService.insert(GoodsPO po)</td>
        <td>添加单一化持久对象</td>
    </tr>
    <tr>
        <td>GoodsDataService.delete(GoodsPO po)</td>
        <td>删除单一化持久对象</td>
    </tr>
    <tr>
        <td>GoodsDataService.update(GoodsPO po)</td>
        <td>更新单一化持久对象</td>
    </tr>
    <tr>
        <td>GoodsDataService.findGoods(Sting info)</td>
        <td>根据输入信息查找</td>
    </tr>
</table>

goodsclassifybl模块的接口规范

<table>
    <tr>
        <td colspan="3">提供的服务（供接口）</td>
    </tr>
    <tr>
        <td rowspan="3">Inventory.viewInventory</td>
        <td>语法</td>
        <td>public InventoryViewVO viewInventory(String beginDate,String endDate);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>日期的输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示在此时间段内的出／入库数量／金额，销售／进货数量／金额，以及库存合计</td>
    </tr>
    <tr>
        <td rowspan="3">Inventory.checkInventory</td>
        <td>语法</td>
        <td>public InventoryCheckVO checkInventory();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经得到库存单据数据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示截至盘点时间的库存快照</td>
    </tr>
    <tr>
        <td rowspan="3">Inventory.getGiftBill</td>
        <td>语法</td>
        <td>public InventoryBillVO getGiftBill();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经得到库存单据数据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应的库存赠送单</td>
    </tr>
    <tr>
        <td rowspan="3">Inventory.getOverFlowBill</td>
        <td>语法</td>
        <td>public InventoryBillVO getOverFlowBill(int num);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经得到库存单据数据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应的库存报溢单</td>
    </tr>
    <tr>
        <td rowspan="3">Inventory.getLossBill</td>
        <td>语法</td>
        <td>public InventoryBillVO getLossBill(int num);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经得到库存单据数据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应的库存报损单</td>
    </tr>
     <tr>
        <td rowspan="3">Inventory.getAlarmBill</td>
        <td>语法</td>
        <td>public InventoryBillVO getAlarmBill(int num);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已经得到库存单据数据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应的库存报警单</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.addGoods</td>
        <td>语法</td>
        <td>public String addGoods(String ID,int num);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品信息输入合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加相应商品</td>
    </tr>
    <tr>
        <td rowspan="3">Goods.submit</td>
        <td>语法</td>
        <td>public void submit();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>输入数据合法</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>生成相应单据</td>
    </tr>
</table>
<table>
    <tr>
        <td colspan="3">需要的服务（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
        <td>InventoryDataService.insert(InventoryBillPO po)</td>
        <td>生成单据</td>
    <tr>
</table>

### Stockbl的接口规范

供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|Stockbl.getStockReceiptID|public String getStockReceiptID()|新建进货单|返回根据时间和编号生成的单据编号|
|Stockbl.getStockReturnReceiptID|public String getStockReturnReceiptID()|新建进货退货单|返回根据时间和编号生成的单据编号|
|Stockbl.submit|public ResultMessage submit(StockReceiptVO stockReceiptVO)|输入合法|保存单据，记录操作，发送消息，返回执行结果|
|Stockbl.update|public ResultMessage update(StockReceiptVO stockReceiptVO)|输入合法，存在未审批通过单据|更新单据，记录操作，返回执行结果|
|Stockbl.delete|public ResultMessage delete(string id)|存在未审批通过单据|删除单据，记录操作，返回执行结果|
|Stockbl.find|public StockReceiptVO find(string id)|输入合法单据号|查找单据，返回查找结果|
|Stockbl.getGoodsNames|public ArrayList\<String> getGoodsNames()|无|返回可选商口名称|
|Stockbl.getPrice|public int getPrice(String goodsName)|选择商品|返回该高品的单价|


需接口

|服务名|服务|
|:---|:---|
|StockDataService.insert|添加进货类单据|
|StockDataService.update|更新进货类单据|
|StockDataService.delete|删除进货类单据|
|StockDataService.find|查找进货类单据|



### Memberbl的接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|Memberbl.insert|public ResultMessage insert(MemberVO memberVO)|输入合法|添加客户，返回执行结果|
|Memberbl.update|public ResultMessage update(MemberVO memberVO)|输入合法|更新客户，返回执行结果|
|Memberbl.delete|public ResultMessage delete(String id)|无|删除客户，返回执行结果|
|Memberbl.search|public ArrayList\<MemberVO> search(SearchConditions sc)|输入合法的搜索条件|返回搜索结果|


需接口

|服务名|服务|
|:---|:---|
|MemberDataService.insert|添加客户|
|MemberDataService.update|更新客户|
|MemberDataService.delete|删除客户|
|MemberDataService.Search|搜索客户|


### Salesbl的接口规范 
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|Salesbl.getSalesReceiptID|public String getSalesReceiptID()|新建销售单|返回根据时间和编号生成的单据编号|
|Salesbl.getSalesReturnReceiptID|public String getSalesReturnReceiptID()|新建销售退货单|返回根据时间和编号生成的单据编号|
|Salesbl.submit|public ResultMessage submit(SalesReceiptVO salesReceiptVO)|输入合法|保存单据，记录操作，发送消息，返回执行结果|
|Salesbl.update|public ResultMessage update(SalesReceiptVO salesReceiptVO)|输入合法|更新单据，记录操作，返回执行结果|
|Salesbl.delete|public ResultMessage delete(string id)|无|删除单据，记录操作，返回执行结果|
|Salesbl.getGoodsNames|public ArrayList<String> getGoodsNames()|无|返回可选商口名称|
|Salesbl.getPrice|public int getPrice(String goodsName)|选择商品|返回该高品的单价|
|Salesbl.getPromotions|public ArrayList\<PromotionVO> getPromotions()|无|返回适合的促销策略|

需接口

|服务名|服务|
|:---|:---|
|SalesDataService.insert|添加销售类单据|
|SalesDataService.update|更新销售类单据|
|SalesDataService.delete|删除销售类单据|
|SalesDataService.Search|搜索销售类单据|


## 5.4 数据层的分解

|模块|职则|
|:--|:--|
|StockDataService|持久化进货类单据信息，提供增删改查|
|MemberDataService|持久化客户信息，提供增删改查|
|SalesDataService|持久化销售类单据，提供增删改查|

### StockDataService的接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|StockDataService.insert|public insert(StockReceiptPO stockReceiptPO)|逻辑层请求添加进货类单据|保存单据|
|StockDataService.update|public update(StockReceiptPO stockReceiptPO)|逻辑层请求更新进货类单据|更新单据|
|StockDataService.delete|public delete(String id)|逻辑层请求删除进货类单据|删除单据|
|StockDataService.find|public find(String id)|逻辑层请求查询进货类单据|返回查询结果|

### MemberDataServic的接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|MemberDataService.insert|public ResultMessage insert(MemberPO memberPO)|逻辑层请求添加客户|添加客户，返回执行结果|
|MemberDataService.update|public ResultMessage update(MemberVO memberVO)|逻辑层请求添加客户|更新客户，返回执行结果|
|MemberDataService.delete|public ResultMessage delete(String id)|逻辑层请求删除客户|删除客户，返回执行结果|
|MemberDataService.search|public ArrayList\<MemberVO> search(searchConditions sc)|逻辑层请求搜索|返回搜索结果|


### SalesDataService接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|SalesDataService.insert|public insert(SalesReceiptPO salesReceiptPO)|逻辑层请求添加销售类单据|保存单据|
|SalesDataService.update|public update(SalesReceiptPO salesReceiptPO)|逻辑层请求更新进货类单据|更新单据|
|SalesDataService.delete|public delete(String id)|逻辑层请求删除销售类单据|删除单据|
|SalesDataService.find|public find(String id)|逻辑层请求查询销售类单据|返回查询结果|

#数据层模块
##数据层模块的职责
|模块|职责|
|---|---|
|AccountDataService|提供账户信息集体载入、集体保存、增、删、查、改服务|
|BusinessDataService|提供销售明细表、经营历程表、经营情况表的查看、保存服务，提供对经营历程表的红冲及红冲并复制操作服务|
|BillDataService|提供收款单、付款单、现金费用单信息集体载入、集体保存、查看服务|
|EstablishDataService|提供期初建账信息载入，查看期初建账信息服务|

### 5.4.2
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
       <tr align="center">
                <td rowspan="4" >DataBaseFactory.getUserDatabase</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public UserDataService getUserDatabase();</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>无</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>返回userdata层接口</td>
       </tr>
  </tr>
       <tr align="center">
                <td rowspan="4" >UserDataService.insert(UserPO user)</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public boolean insert(UserPO user);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户管理人员必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>返回添加数据库结果</td>
       </tr>
   </tr>
        <tr align="center">
                 <td rowspan="4" >UserDataService.search(UserPO user)</td>
               </tr>
               <tr>
                 <td>语法</td>
                 <td>public List search(UserPO user);</td>
               </tr>
               <tr>
                 <td>前置条件</td>
                 <td>用户管理人员必须已经被识别和授权</td>
               </tr>
               <tr>
                 <td>后置条件</td>
                 <td>返回查找后的列表</td>
        </tr>      
   </tr>
        <tr align="center">
                 <td rowspan="4" >UserDataService.delete(UserPO user)</td>
               </tr>
               <tr>
                 <td>语法</td>
                 <td>public boolean delete(UserPO user);</td>
               </tr>
               <tr>
                 <td>前置条件</td>
                 <td>用户管理人员必须已经被识别和授权</td>
               </tr>
               <tr>
                 <td>后置条件</td>
                 <td>返回删除后的结果</td>
        </tr>
   </tr>
        <tr align="center">
                 <td rowspan="4" >UserDataService.Modify(UserPO user)</td>
               </tr>
               <tr>
                 <td>语法</td>
                 <td>public boolean Modify(UserPO user);</td>
               </tr>
               <tr>
                 <td>前置条件</td>
                 <td>用户管理人员必须已经被识别和授权</td>
               </tr>
               <tr>
                 <td>后置条件</td>
                 <td>返回修改结果</td>
        </tr>
   </tr>
        <tr align="center">
                 <td rowspan="4" >UserDataService.login</td>
               </tr>
               <tr>
                 <td>语法</td>
                 <td>public boolean login(String account,String password);</td>
               </tr>
               <tr>
                 <td>前置条件</td>
                 <td>无</td>
               </tr>
               <tr>
                 <td>后置条件</td>
                 <td>返回登陆结果</td>
        </tr>
       <tr align="center">
                    <td rowspan="4" >UserDataService.register</td>
                  </tr>
                  <tr>
                    <td>语法</td>
                    <td>public boolean register(String account,String password);</td>
                  </tr>
                  <tr>
                    <td>前置条件</td>
                    <td>无</td>
                  </tr>
                  <tr>
                    <td>后置条件</td>
                    <td>返回注册结果</td>
           </tr>
    <tr align="center">
                   <td rowspan="4" >DataBaseFactory.getUserDatabase</td>
                 </tr>
                 <tr>
                   <td>语法</td>
                   <td>public UserDataService getUserDatabase();</td>
                 </tr>
                 <tr>
                   <td>前置条件</td>
                   <td>无</td>
                 </tr>
                 <tr>
                   <td>后置条件</td>
                   <td>返回userdata层接口</td>
          </tr>
     </tr>
   <tr align="center">
                  <td rowspan="4" >DataBaseFactory.getMessageDatabase</td>
                </tr>
                <tr>
                  <td>语法</td>
                  <td>public MessageDataService getMessageDatabase();</td>
                </tr>
                <tr>
                  <td>前置条件</td>
                  <td>无</td>
                </tr>
                <tr>
                  <td>后置条件</td>
                  <td>返回messagedata层接口</td>
         </tr>
    </tr>
   <tr align="center">
                  <td rowspan="4" >DataBaseFactory.getLogDatabase</td>
                </tr>
                <tr>
                  <td>语法</td>
                  <td>public LogDataService getUserDatabase();</td>
                </tr>
                <tr>
                  <td>前置条件</td>
                  <td>无</td>
                </tr>
                <tr>
                  <td>后置条件</td>
                  <td>返回logdata层接口</td>
         </tr>
    </tr>
                                             
</table>

|服务名|服务|
|:---|:---|
|SalesDataService.insert|添加销售类单据|
|SalesDataService.update|更新销售类单据|
|SalesDataService.delete|删除销售类单据|
|SalesDataService.Search|搜索销售类单据|


## 5.4 数据层的分解

|模块|职则|
|:--|:--|
|StockDataService|持久化进货类单据信息，提供增删改查|
|MemberDataService|持久化客户信息，提供增删改查|
|SalesDataService|持久化销售类单据，提供增删改查|

### StockDataService的接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|StockDataService.insert|public insert(StockReceiptPO stockReceiptPO)|逻辑层请求添加进货类单据|保存单据|
|StockDataService.update|public update(StockReceiptPO stockReceiptPO)|逻辑层请求更新进货类单据|更新单据|
|StockDataService.delete|public delete(String id)|逻辑层请求删除进货类单据|删除单据|
|StockDataService.find|public find(String id)|逻辑层请求查询进货类单据|返回查询结果|

### MemberDataServic的接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|MemberDataService.insert|public ResultMessage insert(MemberPO memberPO)|逻辑层请求添加客户|添加客户，返回执行结果|
|MemberDataService.update|public ResultMessage update(MemberVO memberVO)|逻辑层请求添加客户|更新客户，返回执行结果|
|MemberDataService.delete|public ResultMessage delete(String id)|逻辑层请求删除客户|删除客户，返回执行结果|
|MemberDataService.search|public ArrayList\<MemberVO> search(searchConditions sc)|逻辑层请求搜索|返回搜索结果|


### SalesDataService接口规范
供接口

|名称|语法|前置条件|后置条件|
|:---|:---|:---|:---|
|SalesDataService.insert|public insert(SalesReceiptPO salesReceiptPO)|逻辑层请求添加销售类单据|保存单据|
|SalesDataService.update|public update(SalesReceiptPO salesReceiptPO)|逻辑层请求更新进货类单据|更新单据|
|SalesDataService.delete|public delete(String id)|逻辑层请求删除销售类单据|删除单据|
|SalesDataService.find|public find(String id)|逻辑层请求查询销售类单据|返回查询结果|

# 6.信息视角
## 6.1数据持久化对象
系统的PO类就是对应的相关的实体类在此只做简单的介绍  
1.UserPO包括用户名，密码，用户类型，用户ID  
2.LogPO包括用户名，时间，事件  
3.MessagePO包括用户名，时间，信息  
