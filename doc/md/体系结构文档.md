# 某灯具企业进销存管理系统体系结构文档


---

# 1.
## 1.2词汇表
|**词汇表**|**词汇含义**|**备注**|
|----|----|---|
|User|用户||
|Promotion|销售策略||
|Log|操作记录||
|Message|消息||
|Check|单据审核||
|Sales|销售||
|Member|客户||
|Stock|库存||
|Bill|款单||
|Business|业务查询||
|Establish|期初建账||
|Account|账户||
|Inventory|库存||
|Goods|商品||
|GoodsClassification|商品分类||
||||


# 2.

# 3.

# 4.组合视角
## 4.1开发包图  
![客户端](体系结构图/客户端.png)  
客户端开发包图  
![服务器端](体系结构图/服务器端.png)
服务器端开发包图


# 5.接口视角
## 5.1模块的职责
## 5.2用户界面层的分解
## 5.3业务逻辑层的分解
### 5.3.2业务逻辑层的接口规范
### userbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
    <td rowspan="4" >User.Login</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public boolean login(long id,String password);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>password符合输入规则</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>查找是否存在相应的User，根据输入的password返回登陆验证的结果</td>
  </tr>
    <tr align="center">
      <td rowspan="4" >User.Register</td>
    </tr>
    <tr>
      <td>语法</td>
      <td>public boolean register(long id,String password1,String password2);</td>
    </tr>
    <tr>
      <td>前置条件</td>
      <td>password符合输入规则且两个password一致</td>
    </tr>
    <tr>
      <td>后置条件</td>
      <td>根据输入的检查是否有此User，无则新建User并返回创建结果</td>
    </tr>
      <tr align="center">
          <td rowspan="4" >User.Find</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean find(long id);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>无</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入的检查是否有此User，有则进入安全问题找回密码</td>
        </tr>
    <tr align="center">
          <td rowspan="4" >User.SafeAnswer</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean checkAnswer(String answer1,String answer2,String answer3);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>无</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入的检查是否正确，正确则进入修改密码页面</td>
        </tr>
        <tr align="center">
          <td rowspan="4" >User.SetPassword</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean setPassword(String password1,String password2);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>password符合输入格式且一致</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据输入修改相应用户的密码</td>
        </tr>
    <tr align="center">
          <td rowspan="4" >UserManager.Init</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void init();</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统初始化管理员初始界面</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Init.List</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void initList();</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统初始化用户数据列表</td>
        </tr>
        <tr align="center">
          <td rowspan="4" >UserManager.User</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public void showUserDetail(UserPO user);</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>系统显示用户详细信息</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Search</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public List search（String keyword）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>返回用户列表</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Add</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean add（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>若系统无此用户，则添加此用户，返回添加结果</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Delete</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean delete（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除相应用户，返回是否成功删除</td>
        </tr>
         <tr align="center">
          <td rowspan="4" >UserManager.Modify</td>
        </tr>
        <tr>
          <td>语法</td>
          <td>public boolean modify（UserPO user）;</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>用户管理人员必须已经被识别和授权</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>修改相应用户，返回是否成功修改</td>
        </tr>
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
      <td>DataBaseFactory.getUserDatabase</td>
      <td>得到User数据库引用</td>
    </tr>
     <tr>
      <td>UserDataService.insert(UserPO po)</td>
      <td>新增User</td>
    </tr>
    <tr>
      <td>UserDataService.search(UserPO po)</td>
      <td>查询User</td>
    </tr>
     <tr>
      <td>UserDataService.delete(UserPO po)</td>
      <td>删除User</td>
    </tr>
     <tr>
      <td>UserDataService.search(String keyword)</td>
      <td>查询User</td>
    </tr>
     <tr>
      <td>UserDataService.modify(UserPO po)</td>
      <td>修改User</td>
    </tr>
     <tr>
      <td>UserDataService.login</td>
      <td>提供登陆服务</td>
    </tr>
    <tr>
      <td>UserDataService.register</td>
      <td>提供注册服务</td>
    </tr>
    <tr>
      <td>UserDataService.login</td>
      <td>提供登陆服务</td>
    </tr>
    <tr>
      <td>UserDataService.find</td>
      <td>提供找回密码服务</td>
    </tr>
</table>
### promotionbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
 <tr align="center">
    <td rowspan="4" >Promotion.List</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void init();</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>初始化销售策略列表</td>
  </tr>
         <tr align="center">
    <td rowspan="4" >Promotion.Detail</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void showDetail(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>显示策略详细信息</td>
  </tr>
   <tr align="center">
    <td rowspan="4" >Promotion.List.Add</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void add(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>系统增加销售策略</td>
  </tr>
  <tr align="center">
    <td rowspan="4" >Promotion.Modify</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void modify(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>系统修改销售策略</td>
    <tr align="center">
    <td rowspan="4" >Promotion.Modify.Delete</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void delete(PromotionPO promotionPO);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>总经理必须已经被识别和授权</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>删除销售策略</td>
  </tr>
  </tr>
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
      <td>DataBaseFactory.getPromotionDatabase</td>
      <td>得到Promotion数据库引用</td>
    </tr>
     <tr>
      <td>PromotionDataService.insert(PromotionPO po)</td>
      <td>新增Promotion</td>
    </tr>
     <tr>
      <td>PromotionDataService.delete(PromotionPO po)</td>
      <td>删除Promotion</td>
    </tr>
     <tr>
      <td>PromotionDataService.modify(PromotionPO po)</td>
      <td>修改Promotion</td>
    </tr>
    
</table>



### utilitybl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
    <td rowspan="4" >Utility.getCurrentUser</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public UserPO getUser();</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>无</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>返回当前User实例</td>
  </tr>
   <tr align="center">
    <td rowspan="4" >Utility.setCurrentUser</td>
  </tr>
  <tr>
    <td>语法</td>
    <td>public void setUser(UserPO user);</td>
  </tr>
  <tr>
    <td>前置条件</td>
    <td>无</td>
  </tr>
  <tr>
    <td>后置条件</td>
    <td>设置当前User实例</td>
  </tr>
  </table>

 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
      <td>User.Login</td>
      <td>登陆成功后设置User实例</td>
    </tr>
</table>

### logbl

<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
     <td rowspan="4" >Log.record</td>
   </tr>
   <tr>
     <td>语法</td>
     <td>public void record(LogPO log);</td>
   </tr>
   <tr>
     <td>前置条件</td>
     <td>无</td>
   </tr>
   <tr>
     <td>后置条件</td>
     <td>记录操作</td>
   </tr>
     <tr align="center">
        <td rowspan="4" >Log.search</td>
      </tr>
      <tr>
        <td>语法</td>
        <td>public List search(String keyword);</td>
      </tr>
      <tr>
        <td>前置条件</td>
        <td>无</td>
      </tr>
      <tr>
        <td>后置条件</td>
        <td>查询操作</td>
      </tr>
        
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
          <td>DataBaseFactory.getLogDatabase</td>
          <td>得到Log数据库引用</td>
        </tr>
         <tr>
          <td>LogDataService.insert(LogPO po)</td>
          <td>新增Log</td>
        </tr>
         <tr>
          <td>LogDataService.search(String keyword)</td>
          <td>查询log</td>
        </tr>
</table>


###checkbl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
  <tr align="center">
         <td rowspan="4" >Examine.List</td>
       </tr>
       <tr>
         <td>语法</td>
         <td>public void init();</td>
       </tr>
       <tr>
         <td>前置条件</td>
         <td>总经理必须已经被识别和授权</td>
       </tr>
       <tr>
         <td>后置条件</td>
         <td>初始化待审批单据列表</td>
       </tr>
       <tr align="center">
                <td rowspan="4" >Examine.List.Detail</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void showDetail(ReceiptPO receipt);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>总经理必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>加载待审批单据详细信息</td>
              </tr>
   <tr align="center">
                  <td rowspan="4" >Examine.List.Approve</td>
                 </tr>
                   <tr>
                        <td>语法</td>
                      <td>public void approve(ReceiptPO receipt);</td>
                  </tr>
                   <tr>
                      <td>前置条件</td>
                       <td>总经理必须已经被识别和授权</td>
                   </tr>
                    <tr>
                      <td>后置条件</td>
                      <td>系统单据状态改为已审核</td>
                   </tr>
            <tr align="center">
                                 <td rowspan="4" >Examine.List.Reject</td>
                               </tr>
                                 <tr>
                                <td>语法</td>
                                   <td>public void reject(ReceiptPO receipt);</td>
                                </tr>
                                 <tr>
                                    <td>前置条件</td>
                                   <td>总经理必须已经被识别和授权</td>
                                  </tr>
                                 <tr>
                                    <td>后置条件</td>
                                    <td>系统向通知界面发出消息</td>
                                  </tr>    
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
     <tr>
              <td>DataBaseFactory.getExamineDatabase</td>
              <td>得到Examine数据库引用</td>
            </tr>
             <tr>
              <td>ExamineDataService.approve(receiptPO po)</td>
              <td>批准单据</td>
            </tr>
             <tr>
              <td>ExamineDataService.reject(receiptPO po)</td>
              <td>驳回单据</td>
            </tr>
           <tr>
            <td>ExamineDataService.show</td>
              <td>返回单据列表</td>
          </tr>           
</table>

### messagebl
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
       <tr align="center">
                <td rowspan="4" >Message.send</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void send(MessagePO message,UserType usertype);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>向数据库和在线的用户发送信息</td>
       </tr>
       <tr align="center">
                <td rowspan="4" >Message.load</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void loadMessage();</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>加载数据库的message信息</td>
       </tr>
   <tr align="center">
                   <td rowspan="4" >Message.system</td>
                 </tr>
                 <tr>
                   <td>语法</td>
                   <td>public void sendSystemMessage(MessagePO message);</td>
                 </tr>
                 <tr>
                   <td>前置条件</td>
                   <td>用户必须已经被识别和授权</td>
                 </tr>
                 <tr>
                   <td>后置条件</td>
                   <td>向用户发送系统信息</td>
          </tr>
 
        
  </table>



 <table>
    <tr align="center">
       <th colspan="2" >需要的服务（需接口）</th>
    </tr>
    <tr>
      <td>服务名</td>
      <td>服务</td>
    </tr>
    <tr>
                  <td>DataBaseFactory.getMessageDatabase</td>
                  <td>得到Examine数据库引用</td>
                </tr>
    <tr>
                  <td>MessageDataService.saveMessage(MessagePO message)</td>
                  <td>保存Message</td>
                </tr>         
    <tr>
                      <td>MessageDataService.loadMessage</td>
                      <td>保存Message</td>
     </tr>            
 <tr>
                       <td>MessageDataService.sendMessage</td>
                       <td>向在线用户发送Message</td>
      </tr>    
                
</table>


### 5.4.2
<table>
  <tr align="center">
    <th colspan="3" >提供的服务（供接口）</th>
  </tr>
       <tr align="center">
                <td rowspan="4" >Message.send</td>
              </tr>
              <tr>
                <td>语法</td>
                <td>public void send(MessagePO message,UserType usertype);</td>
              </tr>
              <tr>
                <td>前置条件</td>
                <td>用户必须已经被识别和授权</td>
              </tr>
              <tr>
                <td>后置条件</td>
                <td>向数据库和在线的用户发送信息</td>
       </tr>
</table>